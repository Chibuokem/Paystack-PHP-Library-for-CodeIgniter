<?php
defined('BASEPATH') OR exit("Access Denied");//comment this line if not using with CodeIgniter

/**
 * Description of Test
 *
 * @author Amir <amirsanni@gmail.com>
 * @date 20-Dec-2016
 */
class Test extends CI_Controller{
    public function __construct(){
        parent::__construct();
        
		$this->load->library('paystack', ['secret_key'=>'YOUR_SECRET_KEY', 'public_key'=>'YOUR_PUBLIC_KEY']);
    }
    
    /*
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    */
    
    public function index(){
        //init($ref, $amount_in_kobo, $email, $metadata_arr=[], $callback_url="", $return_array=false)
        print_r($this->paystack->init("ABFD24E10", 20000, "amir@skylar.com.ng", [
            'name'=>"Amir Sanni",
            'ID'=>"AMS10",
            "Phone"=>"07086201801"
        ], base_url('test/callback'), FALSE));
    }
    
    /*
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    */
    
    public function subscribe(){
        //initSubscription($amount_in_kobo, $email, $plan, $metadata_arr=[], $callback_url="", $return_array=false)
        print_r($this->paystack->init(20000, "amir@skylar.com.ng", "full_d4q", [], base_url('test/callback'), TRUE));
    }
    
    /*
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    */
    
    public function verify($ref){
        print_r($this->paystack->verifyTransaction($ref));
    }
    
    /*
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    */
    
    public function callback(){
        
    }
    
    /*
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    ********************************************************************************************************************************
    */
}
